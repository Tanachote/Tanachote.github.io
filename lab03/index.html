<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
</head>

<body>
    <header class="col-xs-2 col-lg-4">
            <h1>HEADER1</h1><hr>
    </header>
    <div class="searchBar">
        <input type="text" id="search" placeholder="Search field">
        <button type="button" id="searchBtn">search</button>
        <div class="advsearch">
            <input type="checkbox" id="advsearchCheckBox"> Advance Search<br>
        </div>
        <hr>
    </div>

    <div id="checkboxes" style="display: none;">
        <input type="checkbox" id="chBoxN" name="name"> Name<br>
        <input type="checkbox" id="chBoxLN" name="lastname"> Last Name<br>
        <input type="checkbox" id="chBoxNN" name="nickname"> Nickname<br>
        <input type="checkbox" id="chBoxDOB" name="dateOfBirth"> Date of Birth<br>
        <input type="checkbox" id="chBoxP" name="province"> Province<br>
        <input type="checkbox" id="chBoxH" name="height"> Height<br>
        <input type="checkbox" id="chBoxBG" name="bloodGroup"> Blood Group<br>
    </div>

    <div class="container" #id="mainContainer">
        <h2>TABLE</h2>
        <div class="col-xs-2 col-lg-4">
            <h3>C1</h3>
        </div>
        <div class="col-xs-2 col-lg-4">
            <div class="row">
                <table class="table table-striped">
                    <thead>
                        <th>Name</th>
                        <th>LastName</th>
                        <th>Nickname</th>
                        <th>Date of Birth</th>
                        <th>Height</th>
                        <th>Province</th>
                        <th>Blood Group</th>
                    </thead>
                    <tbody id="table">
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-xs-2 col-lg-4">
            <h3>C3</h3>
        </div>
        <hr>
        <div class="footer">
            <p>footer</p>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
    <script>
        var arr
        var advStatus = false

        $(document).ready(function () {
            $.ajax({
                url: './data.json',
                success: function (data) {
                    arr = data
                    $('#table').text('')
                    data.forEach(element => {
                        addDataRowToTable(element)
                    })
                }
            })

            $('#searchBtn').on('click', function() {
                $('#table').text('')
                let val = $('#search').val()
                val = val.toLowerCase()
                search(val)
            })

            $('#search').on('keypress', function(e) {
                if (e.which === 13) {
                    $('#table').text('')
                    let val = $(this).val()
                    val = val.toLowerCase()
                    search(val)
                }
            })

            $('#advsearchCheckBox').on('click', function() {
                if ($(this).is(':checked')) {
                    advStatus = true
                    $('#checkboxes').show()
                } else {
                    advStatus = false
                    $('#checkboxes input:checked').prop('checked', false)
                    $('#checkboxes').hide()
                }
            })

            function search(val) {
                $('#table').append('<tr>')
                arr.forEach(element => {
                    if (val === "") {
                        addDataRowToTable(element)
                    }
                    else if (checkVal(element.name, val, 'name')) {
                        addDataRowToTable(element)
                    }
                    else if (checkVal(element.lastname, val, 'lastname')) {
                        addDataRowToTable(element)
                    }
                    else if (checkVal(element.nickname, val, 'nickname')) {
                        addDataRowToTable(element)
                    }
                    else if (checkVal(element.dateOfBirth, val, 'dateOfBirth')) {
                        addDataRowToTable(element)
                    }
                    else if (checkVal(element.height, val, 'height')) {
                        addDataRowToTable(element)
                    }
                    else if (checkVal(element.province, val, 'province')) {
                        addDataRowToTable(element)
                    }
                    else if (checkVal(element.bloodGroup, val, 'bloodGroup')) {
                        addDataRowToTable(element)
                    }
                })
            }

            function checkVal(input, val, nameVal = "") {
                let isFound = input.toLowerCase().includes(val)
                let isChecked = $('#checkboxes input[name=' + nameVal + ']').is(':checked')
                return (isFound && !advStatus) || (isFound && isChecked && advStatus)
            }

            function addDataRowToTable(element) {
                $('#table').append('<tr>')
                $('#table').append('<td>' + element.name + '</td>')
                $('#table').append('<td>' + element.lastname + '</td>')
                $('#table').append('<td>' + element.nickname + '</td>')
                $('#table').append('<td>' + element.dateOfBirth + '</td>')
                $('#table').append('<td>' + element.height + '</td>')
                $('#table').append('<td>' + element.province + '</td>')
                $('#table').append('<td>' + element.bloodGroup + '</td>')
                $('#table').append('</tr>')
            }
        })
    </script>
</body>
</html>